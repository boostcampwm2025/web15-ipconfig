name: PR Auto Labeler

on:
  pull_request:
    types: [opened, reopened, synchronize, edited]

jobs:
  add-label:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    
    steps:
      - name: Add Label based on Branch Name
        uses: actions/github-script@v7
        with:
          script: |
            const branchName = context.payload.pull_request.head.ref;
            
            const labelMap = {
              'feat': 'âœ¨ feat',
              'fix': 'ğŸ› fix',
              'chore': 'âš™ï¸ chore',
              'refactor': 'â™»ï¸ refactor',
              'style': 'ğŸ€ style',
              'docs': 'ğŸ“ docs',
              'test': 'ğŸ§ª test',
            };

            const prefix = branchName.split('/')[0];

            if (labelMap[prefix]) {
              await github.rest.issues.addLabels({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.issue.number,
                labels: [labelMap[prefix]]
              });
              console.log(`ë¼ë²¨ ì¶”ê°€ ì™„ë£Œ: ${labelMap[prefix]}`);
            } else {
              console.log('ë§¤ì¹­ë˜ëŠ” ë¼ë²¨ íŒ¨í„´ì´ ì—†ìŠµë‹ˆë‹¤.');
            }